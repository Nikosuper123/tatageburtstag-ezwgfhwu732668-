<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>üéÅ Geschenk</title>

<style>
body {
  background:#111;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
  margin:0;
}

button, input {
  padding:15px;
  font-size:18px;
  border-radius:8px;
  border:none;
}

input {
  width:220px;
  margin-bottom:10px;
  text-align:center;
}

#passwordScreen,
#menu, #game, #videoSection, #reward {
  display:none;
  padding:40px;
}

.timer {
  font-size:32px;
  margin-bottom:20px;
}

.timer.red {
  color:red;
}

.grid {
  display:grid;
  grid-template-columns:repeat(4, 80px);
  gap:15px;
  justify-content:center;
}

.card {
  width:80px;
  height:80px;
  perspective:600px;
  cursor:pointer;
}

.card-inner {
  width:100%;
  height:100%;
  position:relative;
  transform-style:preserve-3d;
  transition:transform 0.5s;
}

.card.flipped .card-inner {
  transform:rotateY(180deg);
}

.card-front, .card-back {
  position:absolute;
  width:100%;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:40px;
  border-radius:10px;
  backface-visibility:hidden;
}

.card-front {
  background:#444;
}

.card-back {
  background:#222;
  transform:rotateY(180deg);
}
</style>
</head>

<body>

<!-- üîê PASSWORT -->
<div id="passwordScreen">
  <h2>üîí Gesch√ºtzt</h2>
  <p>Bitte Passwort eingeben</p>
  <input type="password" id="passwordInput" placeholder="Passwort">
  <br>
  <button onclick="checkPassword()">Freischalten</button>
  <p id="error" style="color:red;"></p>
</div>

<h1>üéÆ Geschenk-Spiel</h1>

<div id="menu">
  <button onclick="startGame()">‚ñ∂ Spielen</button>
</div>

<div id="game">
  <h2 id="levelText"></h2>
  <div id="timer" class="timer"></div>
  <div class="grid" id="grid"></div>
</div>

<div id="videoSection">
  <video id="video" width="600" controls>
    <source src="Geburtstag.mp4" type="video/mp4">
  </video>
</div>

<div id="reward">
  <h2>üéâ Gl√ºckwunsch!</h2>
  <img src="karte.png" width="300">
  <p>
    Gutscheincode:
    <b id="code">8tc-hBd-wHA</b>
    <button onclick="copyCode()">Kopieren</button>
  </p>
  <a href="https://www.wunschgutschein.de/einloesen" target="_blank">
    Gutschein einl√∂sen
  </a>
</div>

<audio id="loseSound" src="verloren.mp3"></audio>
<audio id="winSound" src="gewonnen.mp3"></audio>

<script>
// üîê PASSWORT HIER √ÑNDERN
const PASSWORD = "PAPA2026";

document.getElementById("passwordScreen").style.display = "block";

function checkPassword(){
  const input = document.getElementById("passwordInput").value;
  if(input === PASSWORD){
    document.getElementById("passwordScreen").style.display="none";
    document.getElementById("menu").style.display="block";
  } else {
    document.getElementById("error").innerText = "Falsches Passwort";
  }
}

// ================= MEMORY SPIEL =================

const levels = [
  {pairs:6, time:30},
  {pairs:8, time:60},
  {pairs:10, time:90}
];

let level = 0, timer, timeLeft, first=null, lock=false, matched=0;
const emojis = ["üçï","üöó","üéß","üê∂","üéÆ","üç©","üöÄ","‚öΩ","üé∏","üß†"];

function startGame(){
  document.getElementById("menu").style.display="none";
  document.getElementById("game").style.display="block";
  startLevel();
}

function startLevel(){
  matched=0; first=null; lock=true;
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  document.getElementById("levelText").innerText="Level "+(level+1);

  timeLeft=levels[level].time;
  updateTimer(); clearInterval(timer);

  let pool=emojis.slice(0,levels[level].pairs);
  let cards=[...pool,...pool].sort(()=>Math.random()-0.5);

  cards.forEach(e=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <div class="card-inner">
        <div class="card-front">‚ùì</div>
        <div class="card-back">${e}</div>
      </div>`;
    grid.appendChild(card);
    card.classList.add("flipped");
  });

  setTimeout(()=>{
    cards.sort(()=>Math.random()-0.5);
    [...grid.children].forEach((card,i)=>{
      card.querySelector(".card-back").textContent=cards[i];
      card.classList.remove("flipped");
      card.onclick=()=>flip(card);
    });
    lock=false;
    startTimer();
  },2000);
}

function flip(card){
  if(lock||card.classList.contains("flipped"))return;
  card.classList.add("flipped");
  if(!first){ first=card; return; }
  lock=true;
  const a=first.querySelector(".card-back").textContent;
  const b=card.querySelector(".card-back").textContent;
  if(a===b){
    matched++; first=null; lock=false;
    if(matched===levels[level].pairs){clearInterval(timer); nextLevel();}
  } else {
    setTimeout(()=>{first.classList.remove("flipped");card.classList.remove("flipped");first=null;lock=false;},800);
  }
}

function nextLevel(){
  level++;
  level<levels.length ? setTimeout(startLevel,1500) : win();
}

function win(){
  document.getElementById("game").style.display="none";
  document.getElementById("videoSection").style.display="block";
  video.play();
  video.onended=()=>{
    document.getElementById("winSound").play();
    setTimeout(()=>{videoSection.style.display="none";reward.style.display="block";},4000);
  };
}

function startTimer(){
  timer = setInterval(()=>{
    timeLeft--;
    updateTimer();
    if(timeLeft <= 0){
      lose();
    }
  },1000);
}


function updateTimer(){
  timerEl.textContent="‚è± "+timeLeft+"s";
  timerEl.classList.toggle("red",timeLeft<=10);
}

function copyCode(){
  navigator.clipboard.writeText(code.innerText);
  alert("Code kopiert!");
}

function lose(){
  clearInterval(timer);

  const sound = document.getElementById("loseSound");
  sound.currentTime = 0;
  sound.play();

  lock = true;

  setTimeout(()=>{
    startLevel(); // NUR Level neu starten
  }, 2000);
}


const timerEl=document.getElementById("timer");
const video=document.getElementById("video");
const videoSection=document.getElementById("videoSection");
const reward=document.getElementById("reward");
</script>

</body>
</html>
